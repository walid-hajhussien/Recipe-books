function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,i=new Array(e.length);t<e.length;t++)i[t]=e[t];return i}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"1iAI":function(e,t,i){"use strict";i.r(t);var n,r=i("3Pt+"),c=i("tyNb"),o=i("fXoL"),a=i("kt0X"),s=i("ofXK"),b=function(e){return[e]},u=((n=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||n)},n.\u0275cmp=o.Fb({type:n,selectors:[["app-recipe-item"]],inputs:{recipe:"recipe",index:"index"},decls:8,vars:6,consts:[["routerLinkActive","active",1,"list-group-item","clearfix",2,"cursor","pointer",3,"routerLink"],[1,"pull-left"],[1,"list-group-item-heading"],[1,"list-group-item-text"],[1,"pull-right"],["alt","",1,"img-responsive",2,"max-height","50px",3,"src"]],template:function(e,t){1&e&&(o.Ob(0,"a",0),o.Ob(1,"div",1),o.Ob(2,"h4",2),o.nc(3),o.Nb(),o.Ob(4,"p",3),o.nc(5),o.Nb(),o.Nb(),o.Ob(6,"span",4),o.Mb(7,"img",5),o.Nb(),o.Nb()),2&e&&(o.bc("routerLink",o.ec(4,b,t.index)),o.Bb(3),o.oc(t.recipe.name),o.Bb(2),o.oc(t.recipe.description),o.Bb(2),o.bc("src",t.recipe.imageUrl,o.jc))},directives:[c.e,c.d],styles:[""]}),n);function l(e,t){if(1&e){var i=o.Pb();o.Ob(0,"app-recipe-item",4),o.Wb("click",(function(){o.ic(i);var e=t.index;return o.Yb().onClickRecipe(e)})),o.Nb()}if(2&e){var n=t.$implicit;o.bc("index",t.index)("recipe",n)}}var p,d,f,v,m=((d=function(){function e(t,i,n){_classCallCheck(this,e),this.router=t,this.activatedRoute=i,this.store=n}return _createClass(e,[{key:"ngOnInit",value:function(){this.recipes=this.store.select("recipe")}},{key:"onClickRecipe",value:function(e){this.router.navigate([e],{relativeTo:this.activatedRoute})}},{key:"onAddRecipe",value:function(){this.router.navigate(["new"],{relativeTo:this.activatedRoute})}}]),e}()).\u0275fac=function(e){return new(e||d)(o.Lb(c.c),o.Lb(c.a),o.Lb(a.b))},d.\u0275cmp=o.Fb({type:d,selectors:[["app-recipe-list"]],decls:9,vars:3,consts:[[1,"row"],[1,"col-xs-12"],[1,"btn","btn-success",3,"click"],[3,"index","recipe","click",4,"ngFor","ngForOf"],[3,"index","recipe","click"]],template:function(e,t){1&e&&(o.Ob(0,"div",0),o.Ob(1,"div",1),o.Ob(2,"button",2),o.Wb("click",(function(){return t.onAddRecipe()})),o.nc(3,"New Recipe"),o.Nb(),o.Nb(),o.Nb(),o.Mb(4,"hr"),o.Ob(5,"div",0),o.Ob(6,"div",1),o.mc(7,l,1,2,"app-recipe-item",3),o.Zb(8,"async"),o.Nb(),o.Nb()),2&e&&(o.Bb(7),o.bc("ngForOf",o.ac(8,1,t.recipes).recipes))},directives:[s.i,u],pipes:[s.b],styles:[""]}),d),h=((p=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||p)},p.\u0275cmp=o.Fb({type:p,selectors:[["app-recipes"]],decls:5,vars:0,consts:[[1,"row"],[1,"col-md-5"],[1,"col-md-7"]],template:function(e,t){1&e&&(o.Ob(0,"div",0),o.Ob(1,"div",1),o.Mb(2,"app-recipe-list"),o.Nb(),o.Ob(3,"div",2),o.Mb(4,"router-outlet"),o.Nb(),o.Nb())},directives:[m,c.g],styles:[""]}),p),g=i("IzEk"),O=i("lJxs"),N=i("9ans"),y=((v=function(){function e(t,i,n){_classCallCheck(this,e),this.router=t,this.authService=i,this.store=n}return _createClass(e,[{key:"canActivate",value:function(e,t){var i=this;return this.store.select("auth").pipe(Object(g.a)(1),Object(O.a)((function(e){return!!e.user||i.router.createUrlTree(["/auth"])})))}}]),e}()).\u0275fac=function(e){return new(e||v)(o.Sb(c.c),o.Sb(N.a),o.Sb(a.b))},v.\u0275prov=o.Hb({token:v,factory:v.\u0275fac,providedIn:"root"}),v),k=((f=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||f)},f.\u0275cmp=o.Fb({type:f,selectors:[["app-select-recipe"]],decls:2,vars:0,template:function(e,t){1&e&&(o.Ob(0,"h3"),o.nc(1,"Please select a recipe!!!!"),o.Nb())},styles:[""]}),f),w=function e(t,i,n,r){_classCallCheck(this,e),this.name=t,this.description=i,this.imageUrl=n,this.ingredients=r},C=i("w5xW"),x=i("kUlI");function _(e,t){if(1&e&&(o.Ob(0,"div",0),o.Ob(1,"div",1),o.Mb(2,"img",18),o.Nb(),o.Nb()),2&e){o.Yb();var i=o.gc(21);o.Bb(2),o.bc("src",i.value,o.jc)}}function R(e,t){if(1&e){var i=o.Pb();o.Ob(0,"div",19),o.Ob(1,"div",20),o.Mb(2,"input",21),o.Nb(),o.Ob(3,"div",22),o.Mb(4,"input",23),o.Nb(),o.Ob(5,"div",22),o.Ob(6,"button",4),o.Wb("click",(function(){o.ic(i);var e=t.index;return o.Yb().onDeleteIngredient(e)})),o.nc(7,"X"),o.Nb(),o.Nb(),o.Nb()}2&e&&o.bc("formGroupName",t.index)}var j,I=((j=function(){function e(t,i,n,r){_classCallCheck(this,e),this.activatedRoute=t,this.recipeService=i,this.router=n,this.store=r,this.editMode=!1}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.activatedRoute.params.subscribe((function(t){e.id=+t.id,e.editMode=null!=t.id,console.log(e.id),e.initForm()}))}},{key:"initForm",value:function(){var e=this,t="",i="",n="",c=new r.c([]);this.editMode&&(this.storeSub=this.store.select("recipe").pipe(Object(O.a)((function(t){return t.recipes.find((function(t,i){return e.id===i}))}))).subscribe((function(e){if(t=e.name,i=e.imageUrl,n=e.description,e.ingredients){var o=!0,a=!1,s=void 0;try{for(var b,u=e.ingredients[Symbol.iterator]();!(o=(b=u.next()).done);o=!0){var l=b.value;c.push(new r.g({name:new r.e(l.name,[r.t.required]),amount:new r.e(l.amount,[r.t.required,r.t.pattern(/^[1-9]+[0-9]*$/)])}))}}catch(p){a=!0,s=p}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}}}))),this.formObject=new r.g({name:new r.e(t,r.t.required),imagePath:new r.e(i,r.t.required),description:new r.e(n,r.t.required),ingredients:c}),console.log(this.formObject)}},{key:"onSubmit",value:function(){var e=new w(this.formObject.value.name,this.formObject.value.description,this.formObject.value.imagePath,this.formObject.value.ingredients);this.store.dispatch(this.editMode?new C.h({index:this.id,recipe:e}):new C.a(e)),this.router.navigate(["../"],{relativeTo:this.activatedRoute})}},{key:"getFormControl",value:function(e){return this.formObject.get(e).controls}},{key:"onAddIngredient",value:function(){this.formObject.get("ingredients").push(new r.g({name:new r.e(null,[r.t.required]),amount:new r.e(null,[r.t.required,r.t.pattern(/^[1-9]+[0-9]*$/)])}))}},{key:"onCancelEdit",value:function(){this.router.navigate(["../"],{relativeTo:this.activatedRoute})}},{key:"onDeleteIngredient",value:function(e){console.log(e),this.formObject.get("ingredients").removeAt(e)}},{key:"onDeleteAllIngredient",value:function(){this.formObject.get("ingredients").clear()}},{key:"ngOnDestroy",value:function(){this.storeSub&&this.storeSub.unsubscribe()}}]),e}()).\u0275fac=function(e){return new(e||j)(o.Lb(c.a),o.Lb(x.a),o.Lb(c.c),o.Lb(a.b))},j.\u0275cmp=o.Fb({type:j,selectors:[["app-recipe-edit"]],decls:39,vars:4,consts:[[1,"row"],[1,"col-xs-12"],[3,"formGroup","ngSubmit"],["type","submit",1,"btn","btn-success",2,"margin","5px",3,"disabled"],["type","button",1,"btn","btn-danger",3,"click"],[1,"form-group"],["for","name"],["formControlName","name","type","text","id","name",1,"form-control"],["for","imagePath"],["formControlName","imagePath","type","text","id","imagePath",1,"form-control"],["imageLink",""],["class","row",4,"ngIf"],["for","description"],["formControlName","description","rows","6","type","text","id","description",1,"form-control"],["formArrayName","ingredients",1,"col-xs-12"],["style","margin: 5px","class","row",3,"formGroupName",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-success",3,"click"],["type","button",1,"btn","btn-danger","pull-right",3,"click"],["alt","Image preview",1,"img-responsive",3,"src"],[1,"row",2,"margin","5px",3,"formGroupName"],[1,"col-xs-8"],["formControlName","name","type","text",1,"form-control"],[1,"col-xs-2"],["formControlName","amount","type","number",1,"form-control"]],template:function(e,t){if(1&e&&(o.Ob(0,"div",0),o.Ob(1,"div",1),o.Ob(2,"form",2),o.Wb("ngSubmit",(function(){return t.onSubmit()})),o.Ob(3,"div",0),o.Ob(4,"div",1),o.Ob(5,"button",3),o.nc(6,"Save"),o.Nb(),o.Ob(7,"button",4),o.Wb("click",(function(){return t.onCancelEdit()})),o.nc(8,"Cancel"),o.Nb(),o.Nb(),o.Nb(),o.Ob(9,"div",0),o.Ob(10,"div",1),o.Ob(11,"div",5),o.Ob(12,"label",6),o.nc(13,"Name"),o.Nb(),o.Mb(14,"input",7),o.Nb(),o.Nb(),o.Nb(),o.Ob(15,"div",0),o.Ob(16,"div",1),o.Ob(17,"div",5),o.Ob(18,"label",8),o.nc(19,"Image URL"),o.Nb(),o.Mb(20,"input",9,10),o.Nb(),o.Nb(),o.Nb(),o.mc(22,_,3,1,"div",11),o.Ob(23,"div",0),o.Ob(24,"div",1),o.Ob(25,"div",5),o.Ob(26,"label",12),o.nc(27,"Description"),o.Nb(),o.Mb(28,"textarea",13),o.Nb(),o.Nb(),o.Nb(),o.Ob(29,"div",0),o.Ob(30,"div",14),o.mc(31,R,8,1,"div",15),o.Mb(32,"hr"),o.Ob(33,"div",0),o.Ob(34,"div",1),o.Ob(35,"button",16),o.Wb("click",(function(){return t.onAddIngredient()})),o.nc(36,"Add Ingredient"),o.Nb(),o.Ob(37,"button",17),o.Wb("click",(function(){return t.onDeleteAllIngredient()})),o.nc(38,"Delete All"),o.Nb(),o.Nb(),o.Nb(),o.Nb(),o.Nb(),o.Nb(),o.Nb(),o.Nb()),2&e){var i=o.gc(21);o.Bb(2),o.bc("formGroup",t.formObject),o.Bb(3),o.bc("disabled",t.formObject.invalid),o.Bb(17),o.bc("ngIf",i.value),o.Bb(9),o.bc("ngForOf",t.getFormControl("ingredients"))}},directives:[r.u,r.m,r.h,r.a,r.l,r.f,s.j,r.d,s.i,r.i,r.p],styles:["input.ng-invalid.ng-touched[_ngcontent-%COMP%], textarea.ng-invalid.ng-touched[_ngcontent-%COMP%]{border:1px solid red}"]}),j),S=i("JOWn"),A=i("eIep"),L=i("Bkaq");function M(e,t){if(1&e&&(o.Ob(0,"li",10),o.nc(1),o.Nb()),2&e){var i=t.$implicit;o.Bb(1),o.qc("",i.name,"(",i.amount,")")}}var F,P,B,T=((F=function(){function e(t,i,n,r){_classCallCheck(this,e),this.router=t,this.recipeService=i,this.activatedRoute=n,this.store=r}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.activatedRoute.params.pipe(Object(O.a)((function(e){return+e.id})),Object(A.a)((function(t){return console.log(t),e.id=t,e.store.select("recipe")})),Object(O.a)((function(t){return t.recipes[e.id]}))).subscribe((function(t){e.selectedRecipe=t}))}},{key:"onAddToShoppingList",value:function(){this.store.dispatch(new S.b(this.selectedRecipe.ingredients))}},{key:"onEditRecipe",value:function(){this.router.navigate(["edit"],{relativeTo:this.activatedRoute})}},{key:"onDeleteRecipe",value:function(){this.store.dispatch(new C.b(this.id)),this.router.navigate(["../../"],{relativeTo:this.activatedRoute})}}]),e}()).\u0275fac=function(e){return new(e||F)(o.Lb(c.c),o.Lb(x.a),o.Lb(c.a),o.Lb(a.b))},F.\u0275cmp=o.Fb({type:F,selectors:[["app-recipe-detail"]],decls:30,vars:5,consts:[[1,"row"],[1,"col-xs-12"],[1,"img-responsive",2,"max-height","300px",3,"src","alt"],["appDropdown","",1,"btn-group"],["type","button",1,"btn","btn-primary","dropdown-toggle"],[1,"caret"],[1,"dropdown-menu"],[2,"cursor","pointer",3,"click"],[1,"list-group"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"list-group-item"]],template:function(e,t){1&e&&(o.Ob(0,"div",0),o.Ob(1,"div",1),o.Mb(2,"img",2),o.Nb(),o.Nb(),o.Ob(3,"div",0),o.Ob(4,"div",1),o.Ob(5,"h1"),o.nc(6),o.Nb(),o.Nb(),o.Nb(),o.Ob(7,"div",0),o.Ob(8,"div",1),o.Ob(9,"div",3),o.Ob(10,"button",4),o.nc(11,"Manage Recipe "),o.Mb(12,"span",5),o.Nb(),o.Ob(13,"ul",6),o.Ob(14,"li"),o.Ob(15,"a",7),o.Wb("click",(function(){return t.onAddToShoppingList()})),o.nc(16,"To Shopping List"),o.Nb(),o.Nb(),o.Ob(17,"li"),o.Ob(18,"a",7),o.Wb("click",(function(){return t.onEditRecipe()})),o.nc(19,"Edit Recipe"),o.Nb(),o.Nb(),o.Ob(20,"li"),o.Ob(21,"a",7),o.Wb("click",(function(){return t.onDeleteRecipe()})),o.nc(22,"Delete Recipe"),o.Nb(),o.Nb(),o.Nb(),o.Nb(),o.Nb(),o.Nb(),o.Ob(23,"div",0),o.Ob(24,"div",1),o.nc(25),o.Nb(),o.Nb(),o.Ob(26,"div",0),o.Ob(27,"div",1),o.Ob(28,"ul",8),o.mc(29,M,2,2,"li",9),o.Nb(),o.Nb(),o.Nb()),2&e&&(o.Bb(2),o.cc("alt",t.selectedRecipe.name),o.bc("src",t.selectedRecipe.imageUrl,o.jc),o.Bb(4),o.oc(t.selectedRecipe.name),o.Bb(19),o.pc(" ",t.selectedRecipe.description," "),o.Bb(4),o.bc("ngForOf",t.selectedRecipe.ingredients))},directives:[L.a,s.i],styles:[""]}),F),W=i("snw9"),E=i("LRne"),D=i("RVEH"),q=((P=function(){function e(t,i,n){_classCallCheck(this,e),this.requestService=t,this.store=i,this.actions$=n}return _createClass(e,[{key:"resolve",value:function(e,t){var i=this;return this.store.select("recipe").pipe(Object(g.a)(1),Object(A.a)((function(e){return 0===e.recipes.length?(i.store.dispatch(new C.c),i.actions$.pipe(Object(W.d)(C.f.FETCH_RECIPE_SUCCESS),Object(g.a)(1))):Object(E.a)(_toConsumableArray(e.recipes))})))}}]),e}()).\u0275fac=function(e){return new(e||P)(o.Sb(D.a),o.Sb(a.b),o.Sb(W.a))},P.\u0275prov=o.Hb({token:P,factory:P.\u0275fac,providedIn:"root"}),P),U=[{path:"",component:h,canActivate:[y],children:[{path:"",component:k},{path:"new",component:I},{path:":id",component:T,resolve:[q]},{path:":id/edit",component:I,resolve:[q]}]}],H=((B=function e(){_classCallCheck(this,e)}).\u0275mod=o.Jb({type:B}),B.\u0275inj=o.Ib({factory:function(e){return new(e||B)},imports:[[c.f.forChild(U)],c.f]}),B),J=i("ccKW");i.d(t,"RecipeModule",(function(){return G}));var $,G=(($=function e(){_classCallCheck(this,e)}).\u0275mod=o.Jb({type:$}),$.\u0275inj=o.Ib({factory:function(e){return new(e||$)},imports:[[r.j,r.r,H,J.a]]}),$)}}]);